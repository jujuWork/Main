<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Hiragana Chart</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: The application is designed as an interactive dashboard. This structure was chosen to provide a comprehensive learning environment on a single screen, which is more efficient for study and review than flipping through 46 separate pages. The layout is split into a main display area on the left and an interactive panel on the right (which stack on mobile). The main area focuses the learner's attention on one character at a time, showing its form, stroke order, and use in a word. The interactive panel allows for quick navigation via a full character grid and provides a canvas for immediate writing practice. This integrated approach supports different learning modes‚Äîvisual, reading, and kinesthetic‚Äîin a cohesive user flow. -->
    <!-- Visualization & Content Choices: 
        - Hiragana Chart (Right Panel): Goal: Organize/Navigate. Method: A clickable HTML grid. Interaction: Clicking a character updates the entire dashboard. Justification: Provides immediate, non-linear access to any character, essential for both new learners and those reviewing.
        - Main Character Display (Left Panel): Goal: Inform. Method: Large, stylized HTML text. Interaction: Dynamically updated via JavaScript. Justification: Creates a clear focal point for the character being studied.
        - Stroke Order Diagram (Left Panel): Goal: Inform/Teach. Method: An HTML Canvas element. Interaction: A replay button triggers a JS function that draws the character's strokes sequentially. Justification: Animating the stroke order on a canvas is a highly effective, visual way to teach correct writing form without relying on external images or SVG.
        - Example Word (Left Panel): Goal: Contextualize. Method: HTML text with a Unicode emoji. Interaction: Dynamically updated. Justification: Connects the abstract character to a concrete, memorable word and meaning, reinforcing learning.
        - Practice Pad (Right Panel): Goal: Engage/Practice. Method: An HTML Canvas with mouse/touch drawing events. Interaction: Users can write the character; a button clears the canvas. Justification: Provides a kinesthetic learning experience, allowing users to immediately apply what they see.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .hiragana-grid-char {
            transition: all 0.2s ease-in-out;
        }
        .hiragana-grid-char:hover {
            transform: scale(1.1);
            background-color: #fde68a; /* amber-200 */
        }
        .hiragana-grid-char.selected {
            background-color: #f59e0b; /* amber-500 */
            color: white;
            border-color: #b45309; /* amber-700 */
        }
        .practice-canvas {
            touch-action: none;
        }
    </style>
</head>
<body class="bg-amber-50 text-slate-800">

    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-amber-800">Interactive Hiragana Chart</h1>
            <p class="text-slate-600 mt-2">Click a character to learn more and practice writing!</p>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-5 gap-8">
            
            <div class="lg:col-span-2 bg-white rounded-2xl shadow-lg p-6 flex flex-col items-center justify-center space-y-4">
                <div id="main-char-display" class="text-9xl font-bold" style="font-family: 'Yu Mincho', serif;">„ÅÇ</div>
                <div id="romaji-display" class="text-4xl text-slate-500">a</div>
                <div class="w-full max-w-xs p-4 bg-amber-100 rounded-xl text-center">
                    <h3 class="font-bold text-lg text-amber-800">Example Word</h3>
                    <p id="example-word-char" class="text-3xl mt-1">„ÅÇ„Åï</p>
                    <p id="example-word-romaji" class="text-md text-slate-600">asa</p>
                    <p id="example-word-meaning" class="text-md text-slate-600 font-semibold">Morning ‚òÄÔ∏è</p>
                </div>
                 <div class="w-full max-w-xs p-4 text-center">
                    <h3 class="font-bold text-lg text-amber-800 mb-2">Stroke Order</h3>
                    <canvas id="stroke-order-canvas" width="200" height="200" class="bg-gray-100 rounded-lg mx-auto"></canvas>
                    <button id="replay-stroke-btn" class="mt-4 px-4 py-2 bg-amber-500 text-white font-semibold rounded-lg shadow-md hover:bg-amber-600 transition">Replay</button>
                </div>
            </div>

            <div class="lg:col-span-3 bg-white rounded-2xl shadow-lg p-6">
                <div class="grid grid-cols-5 gap-2 md:gap-3 text-center mb-6" id="hiragana-grid">
                </div>
                
                <div class="mt-6 pt-6 border-t border-amber-200">
                    <h3 class="font-bold text-lg text-amber-800 text-center mb-2">Practice Pad</h3>
                     <div class="relative w-full max-w-md mx-auto aspect-video bg-gray-100 rounded-lg shadow-inner">
                        <canvas id="practice-canvas" class="absolute top-0 left-0 w-full h-full rounded-lg practice-canvas"></canvas>
                    </div>
                    <div class="text-center mt-4">
                        <button id="clear-practice-btn" class="px-6 py-2 bg-slate-600 text-white font-semibold rounded-lg shadow-md hover:bg-slate-700 transition">Clear</button>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const hiraganaData = [
                { char: '„ÅÇ', romaji: 'a', word: '„ÅÇ„Åï', word_romaji: 'asa', meaning: 'Morning ‚òÄÔ∏è', strokes: [[[55, 30],[145, 30]], [[90, 10],[90, 170]], [[130, 70], [170, 110], [130, 150], [70, 150], [30, 110], [80, 70]]] },
                { char: '„ÅÑ', romaji: 'i', word: '„ÅÑ„Å¨', word_romaji: 'inu', meaning: 'Dog üê∂', strokes: [[[50, 40], [50, 160]], [[130, 50], [130, 150]]] },
                { char: '„ÅÜ', romaji: 'u', word: '„ÅÜ„Åø', word_romaji: 'umi', meaning: 'Sea üåä', strokes: [[[60, 30], [140, 30]], [[50, 80], [100, 160], [150, 80]]] },
                { char: '„Åà', romaji: 'e', word: '„Åà„Åç', word_romaji: 'eki', meaning: 'Station üöâ', strokes: [[[80, 20],[120, 20]], [[40, 60], [160, 60], [120, 120], [40, 160], [160, 180]]] },
                { char: '„Åä', romaji: 'o', word: '„Åä„Çì„Åå„Åè', word_romaji: 'ongaku', meaning: 'Music üéµ', strokes: [[[40, 80], [160, 80]], [[100, 20], [100, 180]], [[140, 40], [180, 80], [140, 120]], [[150, 150]]] },
                { char: '„Åã', romaji: 'ka', word: '„Åã„Åï', word_romaji: 'kasa', meaning: 'Umbrella ‚òÇÔ∏è', strokes: [[[40, 40], [80, 20], [120, 60]], [[100, 20], [100, 180]], [[140, 50]]] },
                { char: '„Åç', romaji: 'ki', word: '„Åç', word_romaji: 'ki', meaning: 'Tree üå≥', strokes: [[[50, 40], [150, 40]], [[50, 80], [150, 80]], [[100, 20], [100, 180]], [[40, 140], [160, 140]]] },
                { char: '„Åè', romaji: 'ku', word: '„Åè„Å§', word_romaji: 'kutsu', meaning: 'Shoes üëû', strokes: [[[50, 150], [150, 50]]] },
                { char: '„Åë', romaji: 'ke', word: '„Åë„ÇÄ„Åó', word_romaji: 'kemushi', meaning: 'Caterpillar üêõ', strokes: [[[40, 40], [40, 160]], [[80, 60], [160, 60]], [[120, 20], [120, 180]]] },
                { char: '„Åì', romaji: 'ko', word: '„Åì„Å©„ÇÇ', word_romaji: 'kodomo', meaning: 'Child üßí', strokes: [[[40, 60], [160, 60]], [[40, 140], [120, 140]]] },
                { char: '„Åï', romaji: 'sa', word: '„Åï„Åã„Å™', word_romaji: 'sakana', meaning: 'Fish üê†', strokes: [[[40, 40], [160, 40]], [[100, 20], [100, 180]], [[40, 140], [120, 140]]] },
                { char: '„Åó', romaji: 'shi', word: '„Åó„Åä', word_romaji: 'shio', meaning: 'Salt üßÇ', strokes: [[[100, 20], [80, 180]]] },
                { char: '„Åô', romaji: 'su', word: '„Åô„ÅÑ„Åã', word_romaji: 'suika', meaning: 'Watermelon üçâ', strokes: [[[40, 80], [160, 80]], [[100, 20], [100, 140], [80, 180], [120, 180]]] },
                { char: '„Åõ', romaji: 'se', word: '„Åõ„Åã„ÅÑ', word_romaji: 'sekai', meaning: 'World üåç', strokes: [[[40, 40], [160, 40]], [[140, 80], [40, 80]], [[120, 20], [120, 180]]] },
                { char: '„Åù', romaji: 'so', word: '„Åù„Çâ', word_romaji: 'sora', meaning: 'Sky ‚òÅÔ∏è', strokes: [[[40, 40], [160, 40], [40, 80], [160, 80], [80, 140]]] },
                { char: '„Åü', romaji: 'ta', word: '„Åü„Åì', word_romaji: 'tako', meaning: 'Octopus üêô', strokes: [[[40, 80], [160, 80]], [[100, 20], [100, 180]], [[140, 120], [180, 120]], [[140, 160], [180, 160]]] },
                { char: '„Å°', romaji: 'chi', word: '„Å°„Åö', word_romaji: 'chizu', meaning: 'Map üó∫Ô∏è', strokes: [[[40, 80], [160, 80]], [[100, 20], [80, 140], [160, 180]]] },
                { char: '„Å§', romaji: 'tsu', word: '„Å§„Åè„Åà', word_romaji: 'tsukue', meaning: 'Desk üíª', strokes: [[[40, 80], [160, 40], [120, 160]]] },
                { char: '„Å¶', romaji: 'te', word: '„Å¶', word_romaji: 'te', meaning: 'Hand ‚úã', strokes: [[[40, 80], [160, 80], [100, 160]]] },
                { char: '„Å®', romaji: 'to', word: '„Å®„Åë„ÅÑ', word_romaji: 'tokei', meaning: 'Clock ‚è∞', strokes: [[[100, 40], [100, 160]], [[80, 120], [120, 120]]] },
                { char: '„Å™', romaji: 'na', word: '„Å™„Å§', word_romaji: 'natsu', meaning: 'Summer üåª', strokes: [[[40, 80], [160, 80]], [[100, 20], [40, 140]], [[140, 40]], [[160, 120], [120, 160], [180, 140]]] },
                { char: '„Å´', romaji: 'ni', word: '„Å´„Åò', word_romaji: 'niji', meaning: 'Rainbow üåà', strokes: [[[80, 20], [80, 180]], [[40, 80], [120, 80]], [[160, 80], [160, 160]]] },
                { char: '„Å¨', romaji: 'nu', word: '„Å¨„ÅÆ', word_romaji: 'nuno', meaning: 'Cloth üëï', strokes: [[[40, 120], [120, 40]], [[40, 40], [160, 120], [80, 180], [160, 180], [120, 140]]] },
                { char: '„Å≠', romaji: 'ne', word: '„Å≠„Åì', word_romaji: 'neko', meaning: 'Cat üêà', strokes: [[[40, 20], [40, 180]], [[120, 40], [180, 80], [120, 120], [180, 160], [140, 180]]] },
                { char: '„ÅÆ', romaji: 'no', word: '„ÅÆ„Çä', word_romaji: 'nori', meaning: 'Seaweed üçô', strokes: [[[160, 40], [40, 160], [160, 160]]] },
                { char: '„ÅØ', romaji: 'ha', word: '„ÅØ„Å™', word_romaji: 'hana', meaning: 'Flower üå∏', strokes: [[[40, 20], [40, 180]], [[120, 60], [180, 60]], [[150, 40], [150, 140], [120, 180]]] },
                { char: '„Å≤', romaji: 'hi', word: '„Å≤„Åì„ÅÜ„Åç', word_romaji: 'hikouki', meaning: 'Airplane ‚úàÔ∏è', strokes: [[[40, 100], [160, 80], [80, 140]]] },
                { char: '„Åµ', romaji: 'fu', word: '„Åµ„Å≠', word_romaji: 'fune', meaning: 'Boat ‚õµ', strokes: [[[100, 40]], [[40, 80], [80, 120]], [[120, 120], [160, 80]], [[80, 160], [120, 160]]] },
                { char: '„Å∏', romaji: 'he', word: '„Å∏„ÇÑ', word_romaji: 'heya', meaning: 'Room üö™', strokes: [[[40, 160], [160, 40]]] },
                { char: '„Åª', romaji: 'ho', word: '„Åª„Åó', word_romaji: 'hoshi', meaning: 'Star ‚≠ê', strokes: [[[40, 20], [40, 180]], [[120, 60], [180, 60]], [[120, 120], [180, 120]], [[150, 40], [150, 140], [120, 180]]] },
                { char: '„Åæ', romaji: 'ma', word: '„Åæ„Å©', word_romaji: 'mado', meaning: 'Window üñºÔ∏è', strokes: [[[40, 60], [160, 60]], [[40, 120], [160, 120]], [[100, 20], [100, 180], [80, 160]]] },
                { char: '„Åø', romaji: 'mi', word: '„Åø„Åø', word_romaji: 'mimi', meaning: 'Ear üëÇ', strokes: [[[40, 80], [120, 40], [160, 80]], [[140, 20], [80, 180]]] },
                { char: '„ÇÄ', romaji: 'mu', word: '„ÇÄ„Åó', word_romaji: 'mushi', meaning: 'Insect üêû', strokes: [[[40, 80], [160, 80]], [[100, 20], [100, 140], [40, 180]], [[140, 40]]] },
                { char: '„ÇÅ', romaji: 'me', word: '„ÇÅ', word_romaji: 'me', meaning: 'Eye üëÄ', strokes: [[[40, 120], [120, 40]], [[160, 40], [80, 180]]] },
                { char: '„ÇÇ', romaji: 'mo', word: '„ÇÇ„ÇÇ', word_romaji: 'momo', meaning: 'Peach üçë', strokes: [[[100, 20], [80, 180]], [[40, 80], [160, 80]], [[40, 140], [160, 140]]] },
                { char: '„ÇÑ', romaji: 'ya', word: '„ÇÑ„Åæ', word_romaji: 'yama', meaning: 'Mountain ‚õ∞Ô∏è', strokes: [[[140, 40], [80, 80], [120, 120]], [[100, 60]], [[40, 20], [40, 180]]] },
                { char: '„ÇÜ', romaji: 'yu', word: '„ÇÜ„Åç', word_romaji: 'yuki', meaning: 'Snow ‚ùÑÔ∏è', strokes: [[[40, 20], [40, 140], [120, 180]], [[160, 20], [160, 180]]] },
                { char: '„Çà', romaji: 'yo', word: '„Çà„Çã', word_romaji: 'yoru', meaning: 'Night üåô', strokes: [[[40, 80], [160, 80]], [[100, 20], [100, 180]]] },
                { char: '„Çâ', romaji: 'ra', word: '„Çâ„Åè„Å†', word_romaji: 'rakuda', meaning: 'Camel üê™', strokes: [[[100, 40]], [[40, 80], [160, 80], [80, 160]]] },
                { char: '„Çä', romaji: 'ri', word: '„Çä„Çì„Åî', word_romaji: 'ringo', meaning: 'Apple üçé', strokes: [[[40, 40], [40, 160]], [[140, 20], [140, 180]]] },
                { char: '„Çã', romaji: 'ru', word: '„Çã„Åô', word_romaji: 'rusu', meaning: 'Absence üè†', strokes: [[[40, 40], [160, 40], [80, 120], [160, 160], [120, 180]]] },
                { char: '„Çå', romaji: 're', word: '„Çå„ÇÇ„Çì', word_romaji: 'remon', meaning: 'Lemon üçã', strokes: [[[40, 20], [40, 180]], [[120, 40], [180, 80], [120, 120], [180, 160]]] },
                { char: '„Çç', romaji: 'ro', word: '„Çç„ÅÜ„Åù„Åè', word_romaji: 'rousoku', meaning: 'Candle üïØÔ∏è', strokes: [[[40, 40], [160, 40], [80, 120], [160, 160]]] },
                { char: '„Çè', romaji: 'wa', word: '„Çè„Åü„Åó', word_romaji: 'watashi', meaning: 'I/Me üôã', strokes: [[[40, 20], [40, 180]], [[120, 40], [180, 80], [120, 160]]] },
                { char: '„Çí', romaji: 'wo', word: '(particle)', word_romaji: 'o', meaning: 'Object marker', strokes: [[[40, 80], [160, 80]], [[100, 20], [80, 140]], [[40, 160], [160, 160]]] },
                { char: '„Çì', romaji: 'n', word: '„Å±„Çì', word_romaji: 'pan', meaning: 'Bread üçû', strokes: [[[160, 40], [80, 180]]] },
            ];
            
            let currentCharacter = hiraganaData[0];
            const grid = document.getElementById('hiragana-grid');
            
            hiraganaData.forEach(item => {
                const charEl = document.createElement('div');
                charEl.textContent = item.char;
                charEl.className = 'hiragana-grid-char cursor-pointer p-2 md:p-4 rounded-lg border-2 border-amber-200 text-2xl font-semibold';
                charEl.addEventListener('click', () => {
                    currentCharacter = item;
                    updateDisplay();
                });
                grid.appendChild(charEl);
            });

            function updateDisplay() {
                document.getElementById('main-char-display').textContent = currentCharacter.char;
                document.getElementById('romaji-display').textContent = currentCharacter.romaji;
                document.getElementById('example-word-char').textContent = currentCharacter.word;
                document.getElementById('example-word-romaji').textContent = currentCharacter.word_romaji;
                document.getElementById('example-word-meaning').textContent = currentCharacter.meaning;
                
                document.querySelectorAll('.hiragana-grid-char').forEach((el, index) => {
                    if (hiraganaData[index].char === currentCharacter.char) {
                        el.classList.add('selected');
                    } else {
                        el.classList.remove('selected');
                    }
                });
                drawStrokeOrder();
            }

            const strokeCanvas = document.getElementById('stroke-order-canvas');
            const strokeCtx = strokeCanvas.getContext('2d');
            let animationFrameId;

            function drawStrokeOrder() {
                if (animationFrameId) {
                    cancelAnimationFrame(animationFrameId);
                }
                strokeCtx.clearRect(0, 0, strokeCanvas.width, strokeCanvas.height);
                const strokes = currentCharacter.strokes;
                let currentStrokeIndex = 0;
                let currentPointIndex = 0;

                function animateStroke() {
                    if (currentStrokeIndex >= strokes.length) return;

                    const stroke = strokes[currentStrokeIndex];
                    if (currentPointIndex < stroke.length) {
                        strokeCtx.beginPath();
                        strokeCtx.lineWidth = 12;
                        strokeCtx.lineCap = 'round';
                        strokeCtx.lineJoin = 'round';
                        strokeCtx.strokeStyle = `rgba(180, 83, 9, ${0.5 + 0.5 * (currentPointIndex / stroke.length)})`; // amber-700
                        
                        strokeCtx.moveTo(stroke[0][0], stroke[0][1]);
                        for (let i = 1; i <= currentPointIndex; i++) {
                            strokeCtx.lineTo(stroke[i][0], stroke[i][1]);
                        }
                        strokeCtx.stroke();
                        currentPointIndex++;
                        animationFrameId = requestAnimationFrame(animateStroke);
                    } else {
                        currentStrokeIndex++;
                        currentPointIndex = 0;
                        animationFrameId = requestAnimationFrame(animateStroke);
                    }
                }
                animateStroke();
            }
            
            document.getElementById('replay-stroke-btn').addEventListener('click', drawStrokeOrder);

            const practiceCanvas = document.getElementById('practice-canvas');
            const practiceCtx = practiceCanvas.getContext('2d');
            let isDrawing = false;
            let lastX = 0;
            let lastY = 0;
            
            function setCanvasSize() {
                const parent = practiceCanvas.parentElement;
                practiceCanvas.width = parent.clientWidth;
                practiceCanvas.height = parent.clientHeight;
                practiceCtx.strokeStyle = '#334155'; // slate-700
                practiceCtx.lineWidth = 6;
                practiceCtx.lineCap = 'round';
                practiceCtx.lineJoin = 'round';
            }
            
            function getMousePos(canvas, evt) {
                const rect = canvas.getBoundingClientRect();
                return {
                    x: evt.clientX - rect.left,
                    y: evt.clientY - rect.top
                };
            }

            function getTouchPos(canvas, touch) {
                const rect = canvas.getBoundingClientRect();
                return {
                    x: touch.clientX - rect.left,
                    y: touch.clientY - rect.top
                };
            }

            function startDrawing(e) {
                isDrawing = true;
                let pos;
                if (e.touches) {
                    pos = getTouchPos(practiceCanvas, e.touches[0]);
                } else {
                    pos = getMousePos(practiceCanvas, e);
                }
                [lastX, lastY] = [pos.x, pos.y];
            }

            function draw(e) {
                if (!isDrawing) return;
                e.preventDefault();
                let pos;
                if (e.touches) {
                    pos = getTouchPos(practiceCanvas, e.touches[0]);
                } else {
                    pos = getMousePos(practiceCanvas, e);
                }
                practiceCtx.beginPath();
                practiceCtx.moveTo(lastX, lastY);
                practiceCtx.lineTo(pos.x, pos.y);
                practiceCtx.stroke();
                [lastX, lastY] = [pos.x, pos.y];
            }

            function stopDrawing() {
                isDrawing = false;
            }

            practiceCanvas.addEventListener('mousedown', startDrawing);
            practiceCanvas.addEventListener('mousemove', draw);
            practiceCanvas.addEventListener('mouseup', stopDrawing);
            practiceCanvas.addEventListener('mouseout', stopDrawing);
            
            practiceCanvas.addEventListener('touchstart', startDrawing);
            practiceCanvas.addEventListener('touchmove', draw);
            practiceCanvas.addEventListener('touchend', stopDrawing);

            document.getElementById('clear-practice-btn').addEventListener('click', () => {
                practiceCtx.clearRect(0, 0, practiceCanvas.width, practiceCanvas.height);
            });

            window.addEventListener('resize', setCanvasSize);
            setCanvasSize();
            updateDisplay();
        });
    </script>
</body>
</html>
